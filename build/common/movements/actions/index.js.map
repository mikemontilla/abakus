{"version":3,"sources":["../../../../server/common/movements/actions/index.js"],"names":[],"mappings":";;;;;;QAyCgB,c,GAAA,c;QAiBA,Y,GAAA,Y;QAmBA,c,GAAA,c;;AA7EhB;;;;AACA;;;;AAEO,IAAM,sCAAe,cAArB;AACA,IAAM,4CAAkB,iBAAxB;AACA,IAAM,gDAAoB,mBAA1B;AACA,IAAM,gDAAoB,mBAA1B;AACA,IAAM,wCAAgB,eAAtB;;AAEP,SAAS,WAAT,CAAqB,QAArB,EAA+B;AAC3B,WAAO;AACH,cAAM,YADH;AAEH;AAFG,KAAP;AAIH;;AAED,SAAS,cAAT,CAAwB,EAAxB,EAA4B;AACxB,WAAO;AACH,cAAM,eADH;AAEH;AAFG,KAAP;AAIH;;AAED,SAAS,gBAAT,GAA4B;AACxB,WAAO,EAAC,MAAM,iBAAP,EAAP;AACH;;AAED,SAAS,gBAAT,CAA0B,SAA1B,EAAqC;AACjC,WAAO;AACH,cAAM,iBADH;AAEH;AAFG,KAAP;AAIH;;AAED,SAAS,YAAT,CAAsB,KAAtB,EAA6B;AACzB,WAAM;AACF,cAAM,aADJ;AAEF;AAFE,KAAN;AAIH;;AAEM,SAAS,cAAT,GAA0B;AAC7B,WAAO,UAAS,QAAT,EAAmB;AACtB,iBAAS,kBAAT;AACA,eAAO,qBAAM;AACT,iBAAK,iBADI;AAET,oBAAQ,KAFC;AAGT,0BAAc;AAHL,SAAN,EAKN,IALM,CAKD,UAAS,QAAT,EAAkB;AACpB,qBAAS,iBAAiB,SAAS,IAA1B,CAAT;AACH,SAPM,EAQN,KARM,CAQA,UAAS,KAAT,EAAe;AAClB,qBAAS,aAAa,KAAb,CAAT;AACH,SAVM,CAAP;AAWH,KAbD;AAcH;;AAEM,SAAS,YAAT,CAAsB,QAAtB,EAAgC;AACnC,WAAO,UAAS,QAAT,EAAmB;AACtB,iBAAS,YAAY,QAAZ,CAAT;AACA,eAAO,qBAAM;AACT,iBAAK,gBADI;AAET,oBAAQ,MAFC;AAGT,0BAAc,MAHL;AAIT,kBAAM;AAJG,SAAN,EAMN,IANM,CAMD,UAAS,QAAT,EAAkB;AACpB,qBAAS,iBAAiB,SAAS,IAA1B,CAAT;AACH,SARM,EASN,KATM,CASA,UAAS,KAAT,EAAe;AAClB,qBAAS,0BAAmB,IAAnB,EAAT;AACA,qBAAS,aAAa,KAAb,CAAT;AACH,SAZM,CAAP;AAaH,KAfD;AAgBH;;AAEM,SAAS,cAAT,CAAwB,EAAxB,EAA4B;AAC/B,WAAO,UAAS,QAAT,EAAmB;AACtB,iBAAS,eAAe,EAAf,CAAT;AACA,eAAO,qBAAM;AACT,iBAAK,uBADI;AAET,oBAAQ,MAFC;AAGT,0BAAc,MAHL;AAIT,kBAAM,EAAC,MAAD;AAJG,SAAN,EAMN,IANM,CAMD,UAAS,QAAT,EAAkB;AACpB,qBAAS,iBAAiB,SAAS,IAA1B,CAAT;AACH,SARM,EASN,KATM,CASA,UAAS,KAAT,EAAe;AAClB,qBAAS,0BAAmB,IAAnB,EAAT;AACA,qBAAS,aAAa,KAAb,CAAT;AACH,SAZM,CAAP;AAaH,KAfD;AAgBH","file":"index.js","sourcesContent":["import axios from 'axios'\nimport {ActionCreators as UndoActionCreators} from 'redux-undo'\n\nexport const ADD_MOVEMENT = \"ADD_MOVEMENT\";\nexport const REMOVE_MOVEMENT = \"REMOVE_MOVEMENT\";\nexport const REQUEST_MOVEMENTS = \"REQUEST_MOVEMENTS\";\nexport const RECEIVE_MOVEMENTS = \"RECEIVE_MOVEMENTS\";\nexport const RECEIVE_ERROR = \"RECEIVE_ERROR\";\n\nfunction addMovement(movement) {\n    return {\n        type: ADD_MOVEMENT,\n        movement\n    };\n}\n\nfunction removeMovement(id) {\n    return {\n        type: REMOVE_MOVEMENT,\n        id\n    };\n}\n\nfunction requestMovements() {\n    return {type: REQUEST_MOVEMENTS};\n}\n\nfunction receiveMovements(movements) {\n    return {\n        type: RECEIVE_MOVEMENTS,\n        movements\n    };\n}\n\nfunction receiveError(error) {\n    return{\n        type: RECEIVE_ERROR,\n        error\n    };\n}\n\nexport function fetchMovements() {\n    return function(dispatch) {\n        dispatch(requestMovements());\n        return axios({\n            url: \"/api/movements/\",\n            method: \"get\",\n            responseType: \"json\"\n        })\n        .then(function(response){\n            dispatch(receiveMovements(response.data));\n        })\n        .catch(function(error){\n            dispatch(receiveError(error));\n        });\n    };\n}\n\nexport function saveMovement(movement) {\n    return function(dispatch) {\n        dispatch(addMovement(movement));\n        return axios({\n            url: \"/api/movements\",\n            method: \"post\",\n            responseType: \"json\",\n            data: movement\n        })\n        .then(function(response){\n            dispatch(receiveMovements(response.data));\n        })\n        .catch(function(error){\n            dispatch(UndoActionCreators.undo());\n            dispatch(receiveError(error));\n        });\n    };\n}\n\nexport function deleteMovement(id) {\n    return function(dispatch) {\n        dispatch(removeMovement(id));\n        return axios({\n            url: \"/api/movements/remove\",\n            method: \"post\",\n            responseType: \"json\",\n            data: {id}\n        })\n        .then(function(response){\n            dispatch(receiveMovements(response.data));\n        })\n        .catch(function(error){\n            dispatch(UndoActionCreators.undo());\n            dispatch(receiveError(error));\n        });\n    }\n}\n"]}